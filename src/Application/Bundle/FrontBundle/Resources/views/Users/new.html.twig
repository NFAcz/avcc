{% extends "FOSUserBundle::layout.html.twig" %}

{% block body %}
	<h1>
		<a href="{{ path('users') }}"><i class="icon-arrow-left-3 fg-darker smaller"></i> </a>
		New User
	</h1>
    {{ form_start(form, {attr: {class:'form-horizontal'} }) }}
    {{ form_errors(form) }}

	<div class="form-group form-group-sm">
		<label class="col-sm-2 control-label no-left-padding">Name</label>
		<div class="col-sm-4">
            {{ form_widget(form.name, {attr: {class:'form-control'} }) }}
            {% for errorItem in form.name.vars.errors %}
				<span class="has-error text-danger" for="{{ form.name.vars.id }}">{{ errorItem.message }}</span>
            {% endfor %}
		</div>
	</div>
	<div class="form-group form-group-sm">
		<label class="col-sm-2 control-label no-left-padding">Username</label>
		<div class="col-sm-4">
            {{ form_widget(form.username, {attr: {class:'form-control'} }) }}
            {% for errorItem in form.username.vars.errors %}
				<span class="has-error text-danger" for="{{ form.username.vars.id }}">{{ errorItem.message }}</span>
            {% endfor %}
		</div>
	</div>
	<div class="form-group form-group-sm">
		<label class="col-sm-2 control-label no-left-padding">Email</label>
		<div class="col-sm-4">
            {{ form_widget(form.email, {attr: {class:'form-control'} }) }}
            {% for errorItem in form.email.vars.errors %}
				<span class="has-error text-danger" for="{{ form.email.vars.id }}">{{ errorItem.message }}</span>
            {% endfor %}
		</div>
	</div>
	{% if is_granted('ROLE_SUPER_ADMIN') %}
		<div class="form-group form-group-sm">
			<label class="col-sm-2 control-label no-left-padding">Organizations</label>
			<div class="col-sm-4">
				{{ form_widget(form.organizations, {attr: {class:'form-control'} }) }}
				{% for errorItem in form.organizations.vars.errors %}
					<span class="has-error text-danger" for="{{ form.organizations.vars.id }}">{{ errorItem.message }}</span>
				{% endfor %}
			</div>
		</div>
	{% endif %}
	<div class="form-group form-group-sm">
		<label class="col-sm-2 control-label no-left-padding">Password</label>
		<div class="col-sm-4">
            {{ form_widget(form.plainPassword.first, {attr: {class:'form-control'} }) }}
            {% for errorItem in form.plainPassword.first.vars.errors %}
				<span class="has-error text-danger" for="{{ form.plainPassword.first.vars.id }}">{{ errorItem.message }}</span>
            {% endfor %}
		</div>
	</div>
	<div class="form-group form-group-sm">
		<label class="col-sm-2 control-label no-left-padding">Confirm Password</label>
		<div class="col-sm-4">
            {{ form_widget(form.plainPassword.second, {attr: {class:'form-control'} }) }}
            {% for errorItem in form.plainPassword.second.vars.errors %}
				<span class="has-error text-danger" for="{{ form.plainPassword.second.vars.id }}">{{ errorItem.message }}</span>
            {% endfor %}
		</div>
	</div>
	<div class="form-group form-group-sm">
		<label class="col-sm-2 control-label no-left-padding">Roles</label>
		<div class="col-sm-4">
            {{ form_widget(form.roles, {attr: {class:'form-control',id:'roles'} }) }}
            {% for errorItem in form.roles.vars.errors %}
				<span class="has-error text-danger" for="{{ form.roles.vars.id }}">{{ errorItem.message }}</span>
            {% endfor %}
		</div>
	</div>
	<div class="form-group form-group-sm">
		<label class="col-sm-2 control-label no-left-padding"></label>
		<div class="col-sm-2">
            {{ form_widget(form.submit, {attr: {class:'btn btn-m btn-primary btn-block'} }) }}
		</div>
		<div class="col-sm-2">
			<button class="btn btn-m btn-default btn-block"  type="button" id="_submit" name="_submit" onclick="window.location = '{{ path('users') }}'">Cancel</button>
		</div>

	</div>
    {{ form_end(form) }}
	<script type="text/javascript" src="{{ asset('bundles/applicationfront/js/users.js') }}"></script>
	<script type="text/javascript">
		$(document).ready(function () {
			initialize_form();
		});
	</script>
{% endblock body %}
