<?php

namespace Application\Bundle\FrontBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * RecordsRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class RecordsRepository extends EntityRepository
{

    public function findAllRecords($offset, $limit)
    {
        return $this->getEntityManager()->createQuery("SELECT r as record,m.name as mediaType,p.name as projectTitle"
                                . " FROM ApplicationFrontBundle:Records r"
                                . " JOIN ApplicationFrontBundle:MediaTypes m WITH r.mediaType = m.id"
                                . " JOIN ApplicationFrontBundle:Projects p WITH r.project = p.id"
                                . " order by r.id"
                        )
//                        ->setMaxResults($limit)
//                        ->setFirstResult($offset)
                        ->getArrayResult();
    }

}
